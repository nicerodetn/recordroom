<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">


<div  th:fragment="loadFormFragment">
    <div class="my-5" id="b-homedb">

        <div class="container">

            <h3 style="font-size:32px;" class="text-center col-12 b-latest-data">File Master Creation</h3>
            <div class="row">
                <div class="container-fluid add-form-list">
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="card">
                                <div class="card-body">
                                    <div th:if="${successMessage}"
                                         class="alert alert-success alert-dismissible fade show text-center"
                                         id="successMsg"
                                         role="alert"
                                         th:text="${successMessage}">
                                    </div>

                                    <form th:object="${record}" method="post"
                                          hx-post="/record/circulation/save"
                                          hx-target="#b-homedb"
                                          hx-swap="outerHTML"
                                          class="row g-3 border p-3 rounded bg-light shadow-sm"
                                          id="recordForm">
                                        <!-- 1. File Type -->

                                        <div style="padding-top: 17px;" class="col-12">
                                            <label class="form-label fw-bold">1. File Type</label><br>
                                            <select class="form-select" th:field="*{fileType}" required>
                                                <option value="">-- Select Section --</option>
                                                <option value="1">1 Year</option>
                                                <option value="3">3 Year</option>
                                                <option value="5">5 Year</option>
                                                <option value="10">10 Year</option>
                                            </select>
                                            <div class="invalid-feedback">
                                                Please select a section before saving.
                                            </div>
                                        </div>

<!--                                        <div class="col-12">-->
<!--                                            <label class="form-label fw-bold">Year</label>-->
<!--                                            <input type="number" class="form-control" id="yearInput" name="year" min="1900" max="2099" placeholder="Enter year" required>-->
<!--                                        </div>-->

                                        <!-- 2. DR Serial No -->
                                        <div class="col-12">
                                            <label class="form-label fw-bold">2. DR Serial No</label>
                                            <input type="number" class="form-control" th:field="*{drSerialNo}" placeholder="Enter DR serial number">
                                        </div>

                                        <!-- 3. Section Dropdown -->
                                        <div style="padding-top: 17px;" class="col-12">
                                            <label class="form-label fw-bold">3. Section</label><br>
                                            <select class="form-select" th:field="*{section}" required>
                                                <option value="">-- Select Section --</option>
                                                <option th:each="sec: ${sections}"
                                                        th:value="${sec.id}"
                                                        th:text="${sec.code + ' - ' + sec.section}"></option>
                                            </select>
                                            <div class="invalid-feedback">
                                                Please select a section before saving.
                                            </div>
                                        </div>

                                        <!-- 4. File Closing Date -->
                                        <div class="col-12">
                                            <label class="form-label fw-bold">4. File Closing Date</label>
                                            <input type="date" class="form-control" th:field="*{fileClosingDate}">
                                        </div>

                                        <!-- 5. Handing Over Date -->
                                        <div class="col-12">
                                            <label class="form-label fw-bold">5. Handing Over Date</label>
                                            <input type="date" class="form-control" th:field="*{handingOverDate}">
                                        </div>

                                        <!-- 6. Rack Details -->
                                        <div class="col-12">
                                            <label class="form-label fw-bold">6. Rack Details</label>
                                            <input type="number" class="form-control" th:field="*{rackDetails}" placeholder="Enter rack no/details">
                                        </div>

                                        <!-- 7. Remarks -->
                                        <div class="col-12">
                                            <label class="form-label fw-bold">7. Remarks</label>
                                            <textarea class="form-control" th:field="*{remarks}" rows="2" placeholder="Enter remarks"></textarea>
                                        </div>

                                        <!-- 8. Section Dealing Hand Name -->
                                        <div class="col-12">
                                            <label class="form-label fw-bold">8a) Section Dealing Hand Name</label>
                                            <input type="text" class="form-control" th:field="*{sectionDealingHandName}" placeholder="Enter dealing hand name">
                                        </div>

                                        <!-- 9. Section Dealing Hand Phone -->
                                        <div class="col-12">
                                            <label class="form-label fw-bold">8b) Section Dealing Hand Phone No</label>
                                            <input type="text" class="form-control" th:field="*{sectionDealingHandPhoneNo}" placeholder="Enter phone no">
                                        </div>




                                        <!-- 10. Record Room Dealing Hand Name -->


                                        <div style="padding-top: 17px;" class="col-12">
                                            <label class="form-label fw-bold">9. Record Room Dealing Hand Name</label><br>
                                            <select class="form-select" th:field="*{recordRoomDealingHandName}" required>
                                                <option value="">-- Select Section--</option>
                                                <option value="Murugan">Shri A. Murugan</option>
                                                <option value="Shiva">Shri Siva</option>
                                                <option value="Palani">Shri Palani</option>
                                            </select>
                                            <div class="invalid-feedback">
                                                Please select a section before saving.
                                            </div>
                                        </div>



                                        <!-- Submit Button -->
                                        <div class="d-grid mt-4">
                                            <button type="submit" class="btn btn-primary btn-lg">ðŸ’¾ Save Record</button>
                                        </div>
                                    </form>

                                    <script>
                                        // Auto-hide success message after 3 seconds
                                        setTimeout(() => {
                                            let msg = document.getElementById("successMsg");
                                            if (msg) {
                                                msg.classList.remove("show");
                                                msg.remove();
                                            }
                                        }, 3000);
                                    </script>


                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="response"></div>
                </div>
            </div>
        </div>

    </div>
</div>
</html>